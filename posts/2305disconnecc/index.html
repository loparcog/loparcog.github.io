<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>The Game of Disconnecting ðŸ”Œ | Giacomo</title><meta name=keywords content="code,webdev"><meta name=description content="My first dive into actual site and service hosting through disconne.cc"><meta name=author content="Giacomo Loparco"><link rel=canonical href=https://loparcog.github.io/posts/2305disconnecc/><link crossorigin=anonymous href=/assets/css/stylesheet.f417b2b78a51a3f1015eb588a750379d079f7aca74d3fc689d30c120942e444c.css integrity="sha256-9Beyt4pRo/EBXrWIp1A3nQefesp00/xonTDBIJQuREw=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://loparcog.github.io/img/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://loparcog.github.io/img/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://loparcog.github.io/img/favicon-32x32.png><link rel=apple-touch-icon href=https://loparcog.github.io/img/apple-touch-icon.png><link rel=mask-icon href=https://loparcog.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css integrity=sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0 crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js integrity=sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4 crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous onload=renderMathInElement(document.body)></script><meta property="og:title" content="The Game of Disconnecting ðŸ”Œ"><meta property="og:description" content="My first dive into actual site and service hosting through disconne.cc"><meta property="og:type" content="article"><meta property="og:url" content="https://loparcog.github.io/posts/2305disconnecc/"><meta property="og:image" content="https://loparcog.github.io/img/pfp.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-16T13:58:52-04:00"><meta property="article:modified_time" content="2023-05-16T13:58:52-04:00"><meta property="og:site_name" content="Giacomo"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://loparcog.github.io/img/pfp.png"><meta name=twitter:title content="The Game of Disconnecting ðŸ”Œ"><meta name=twitter:description content="My first dive into actual site and service hosting through disconne.cc"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://loparcog.github.io/posts/"},{"@type":"ListItem","position":2,"name":"The Game of Disconnecting ðŸ”Œ","item":"https://loparcog.github.io/posts/2305disconnecc/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"The Game of Disconnecting ðŸ”Œ","name":"The Game of Disconnecting ðŸ”Œ","description":"My first dive into actual site and service hosting through disconne.cc","keywords":["code","webdev"],"articleBody":"This site has since been taken down, and is looking to be replaced by whatever other web project pops into my mind\nWhat is it DISCOnne.cc was a game project I had sitting around for a long time. It had originally been set up and sitting around in some form since August 2021. At this point, I was pretty deep into browser games (flash games are still near and dear to my heart, but in this case, think things like slither.io, vertix.io, etc.), and was interested in dipping my toes in. As everyone is probably very familiar with at this point, these games all have some commonalities between them:\nA sense of progression and growth the longer youâ€™re in the game A basic gameplay loop to allow anyone to get in and quickly get involved A quick game cycle, getting people bounced out of the game and back in as fast and commonly as possible I was looking to hit all of these notes in the simplest and stupidest ways possible. Some quick battle games like rock paper scissors came to mind, but that still had too much structure. I wanted something with a healthy dose of RNG and a nonsensical gameplay loop. I decided to have a game where people would not be able to directly attack others, but they would be able to attack and instantly defeat other players. And since I didnâ€™t have any real ad space to show on the home page or any reason to pull them back, I thought it would be funny to just fully disconnect players when they lost.\nAnd it was (at least to me)!\nWhy did you do this I had some free time and wanted to see what putting out a website would be like. I also wanted to introduce chaos into the world. I donâ€™t think I need or genuinely have more reason.\nHow does it work This was all run on a Node.js server hosted on Google Cloud Platform using their free trial credits because why not. All of the networking was done on a basis of socket.io, making the interactions between players and the subsequent disconnections very easy. The frontend was just basic HTML and CSS since making a fancy React frontend for this felt disingenuous. And also would have probably been the same amount of work as putting the backend together.\nThis all works off of the basis of websocket connections. When you connect to the game, you are put into the mix of everyone else currently playing. The server tracks you by your socket UID, your total time in the game, and your available time to spend. Time to spend can be used on disconnecting another user or parrying a disconnect for a cost of 10s or 5s, respectively. These are both untargeted actions. Your time to spend is essentially your total time that is subtracted from every time you perform an action.\nWhen you disconnect another user, the server will randomly choose a currently connected user. The server will then check if that user is viable to be disconnected. If the user to be disconnected has used a parry action in the last 2 seconds, then they will actually reflect the disconnect and disconnect you instead. Stupid, right?\nThis parry windy will also be open for 5 seconds whenever a player joins the game, just to make sure they donâ€™t get immediately booted from the game and to add some flavour. If the user has been in the game for more than 5 seconds though, and their parry is not active, then they will be disconnected.\nObviously the main issue here would now be balancing. The cost of disconnecting would mainly dictate the speed of the game, and the parry action would need to work around that. For this, I made sure that when a user parries, they cannot parry for another 5 seconds, or the original cost of the parry. This will make them invulnerable to disconnects for 2 seconds, and then vulnerable and on parry cooldown for another 3 seconds, to prevent parry spamming.\nThis defending from an invisible threat and the opposite of attacking any random player was extremely fun to implement, and is something I would love to explore in a more complicated game setup as well. Of course, these would likely not be regular game mechanics, or rather, something that I think users en masse would love to see implemented across all games. I just think the silliness of it all would be attractive for a bit to people who are tired of the usual strategic and brain-hurting approaches.\nWhat was the setup Setup was actually a breeze. The hardest part was choosing a domain. I got the beauty of disconne.cc for around $10/year, and navigated through Google Cloud Platform (GCP) to host. Iâ€™ve played around in GCP from my current position in Darktrace, but never actually deployed anything personally. For a small passion project, and seeing as they were offering a bunch of free starting credits for 90 days, I thought why not.\nThe site was a quick and simple upload of code, upload of a boot script, and we were off to the races. That being said, this barely scratched into the free credit offerings of GCP, $3 to be exact, so I may try to take advantage of that in the future, or I recommend others do too.\nWhere were the bugs There were none! There never are!\nImmediately diving into webdev with user to user interactions would obviously come with some unforeseen problems. The first one I saw was actually when I tweeted out the link to the site.\nTraditionally, when you close the browser window, socket.io would detect this and mark you as disconnected. However, if you accessed the site through a built-in browser like the one found in Twitter, leaving the page would not mark you as disconnected. You could stay there perpetually as long as someone else didnâ€™t disconnect you, and opening the page again would treat you as a whole other user. This was something that could have been solved by an inactivity monitor, but that would have also come with its own host of problems.\nFurthermore, later in its deployment, the server started to state that the time people had stayed on the site was 10 seconds less than their actual time, leading the timer to start off at -10. This one was extra confusing to me, and there must have been some sort of bug in the logic on how I computed the time users joined from the client and server side that I never caught in testing.\nI imagine if this was still running, more bugs would be coming up that would need to be squashed, but Iâ€™m hoping to replace this now with something a bit more basic on the server-side, leaning a bit more into client-side experiences without the need for server-side validation and user-to-user interaction.\n","wordCount":"1161","inLanguage":"en","datePublished":"2023-05-16T13:58:52-04:00","dateModified":"2023-05-16T13:58:52-04:00","author":{"@type":"Person","name":"Giacomo Loparco"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://loparcog.github.io/posts/2305disconnecc/"},"publisher":{"@type":"Organization","name":"Giacomo","logo":{"@type":"ImageObject","url":"https://loparcog.github.io/img/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://loparcog.github.io/ accesskey=h title="Giacomo (Alt + H)">Giacomo</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://loparcog.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://loparcog.github.io/archives/ title=archives><span>archives</span></a></li><li><a href=https://loparcog.github.io/animals/ title=animals><span>animals</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://loparcog.github.io/>Home</a>&nbsp;Â»&nbsp;<a href=https://loparcog.github.io/posts/>Posts</a></div><h1 class=post-title>The Game of Disconnecting ðŸ”Œ</h1><div class=post-meta><span title='2023-05-16 13:58:52 -0400 -0400'>May 16, 2023</span>&nbsp;Â·&nbsp;6 min&nbsp;Â·&nbsp;Giacomo Loparco</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#what-is-it>What is it</a></li><li><a href=#why-did-you-do-this>Why did you do this</a></li><li><a href=#how-does-it-work>How does it work</a></li><li><a href=#what-was-the-setup>What was the setup</a></li><li><a href=#where-were-the-bugs>Where were the bugs</a></li></ul></nav></div></details></div><div class=post-content><p><em>This site has since been taken down, and is looking to be replaced by whatever other web project pops into my mind</em></p><h2 id=what-is-it>What is it<a hidden class=anchor aria-hidden=true href=#what-is-it>#</a></h2><p><strong>DISCOnne.cc</strong> was a game project I had sitting around for a long time. It had originally been set up and sitting around in some form since August 2021. At this point, I was pretty deep into browser games (flash games are still near and dear to my heart, but in this case, think things like <a href=http://slither.io/>slither.io</a>, <a href=http://vertix.io/>vertix.io</a>, etc.), and was interested in dipping my toes in. As everyone is probably very familiar with at this point, these games all have some commonalities between them:</p><ul><li>A sense of progression and growth the longer you&rsquo;re in the game</li><li>A basic gameplay loop to allow anyone to get in and quickly get involved</li><li>A quick game cycle, getting people bounced out of the game and back in as fast and commonly as possible</li></ul><p>I was looking to hit all of these notes in the simplest and stupidest ways possible. Some quick battle games like rock paper scissors came to mind, but that still had too much structure. I wanted something with a healthy dose of RNG and a nonsensical gameplay loop. I decided to have a game where people would not be able to directly attack others, but they would be able to attack and instantly defeat other players. And since I didn&rsquo;t have any real ad space to show on the home page or any reason to pull them back, I thought it would be funny to just fully disconnect players when they lost.</p><p>And it was (at least to me)!</p><h2 id=why-did-you-do-this>Why did you do this<a hidden class=anchor aria-hidden=true href=#why-did-you-do-this>#</a></h2><p>I had some free time and wanted to see what putting out a website would be like. I also wanted to introduce chaos into the world. I don&rsquo;t think I need or genuinely have more reason.</p><h2 id=how-does-it-work>How does it work<a hidden class=anchor aria-hidden=true href=#how-does-it-work>#</a></h2><p>This was all run on a Node.js server hosted on Google Cloud Platform using their free trial credits because why not. All of the networking was done on a basis of socket.io, making the interactions between players and the subsequent disconnections very easy. The frontend was just basic HTML and CSS since making a fancy React frontend for this felt disingenuous. <em>And also would have probably been the same amount of work as putting the backend together.</em></p><p>This all works off of the basis of websocket connections. When you connect to the game, you are put into the mix of everyone else currently playing. The server tracks you by your socket UID, your total time in the game, and your available time to <em>spend</em>. Time to <em>spend</em> can be used on disconnecting another user or parrying a disconnect for a cost of 10s or 5s, respectively. These are both untargeted actions. Your time to spend is essentially your total time that is subtracted from every time you perform an action.</p><p>When you disconnect another user, the server will randomly choose a currently connected user. The server will then check if that user is viable to be disconnected. If the user to be disconnected has used a parry action in the last 2 seconds, then they will actually reflect the disconnect and <strong>disconnect you instead</strong>. Stupid, right?</p><p>This parry windy will also be open for 5 seconds whenever a player joins the game, just to make sure they don&rsquo;t get immediately booted from the game and to add some <em>flavour</em>. If the user has been in the game for more than 5 seconds though, and their parry is not active, then they will be disconnected.</p><p>Obviously the main issue here would now be balancing. The cost of disconnecting would mainly dictate the speed of the game, and the parry action would need to work around that. For this, I made sure that when a user parries, they cannot parry for another 5 seconds, or the original cost of the parry. This will make them invulnerable to disconnects for 2 seconds, and then vulnerable and on parry cooldown for another 3 seconds, to prevent parry spamming.</p><p>This <em>defending from an invisible threat</em> and the opposite of <em>attacking any random player</em> was extremely fun to implement, and is something I would love to explore in a more complicated game setup as well. Of course, these would likely not be <em>regular game mechanics</em>, or rather, something that I think users en masse would love to see implemented across all games. I just think the silliness of it all would be attractive for a bit to people who are tired of the usual strategic and brain-hurting approaches.</p><h2 id=what-was-the-setup>What was the setup<a hidden class=anchor aria-hidden=true href=#what-was-the-setup>#</a></h2><p>Setup was actually a breeze. The hardest part was choosing a domain. I got the beauty of disconne.cc for around $10/year, and navigated through Google Cloud Platform (GCP) to host. I&rsquo;ve played around in GCP from my current position in Darktrace, but never actually deployed anything personally. For a small passion project, and seeing as they were offering a bunch of free starting credits for 90 days, I thought why not.</p><p>The site was a quick and simple upload of code, upload of a boot script, and we were off to the races. That being said, this barely scratched into the free credit offerings of GCP, $3 to be exact, so I may try to take advantage of that in the future, or I recommend others do too.</p><h2 id=where-were-the-bugs>Where were the bugs<a hidden class=anchor aria-hidden=true href=#where-were-the-bugs>#</a></h2><p><del>There were none! There never are!</del></p><p>Immediately diving into webdev with user to user interactions would obviously come with some unforeseen problems. The first one I saw was actually when I tweeted out the link to the site.</p><p>Traditionally, when you close the browser window, socket.io would detect this and mark you as disconnected. However, if you accessed the site through a built-in browser like the one found in Twitter, leaving the page would not mark you as disconnected. You could stay there perpetually as long as someone else didn&rsquo;t disconnect you, and opening the page again would treat you as a whole other user. This was something that could have been solved by an inactivity monitor, but that would have also come with its own host of problems.</p><p>Furthermore, later in its deployment, the server started to state that the time people had stayed on the site was 10 seconds less than their actual time, leading the timer to start off at <code>-10</code>. This one was extra confusing to me, and there must have been some sort of bug in the logic on how I computed the time users joined from the client and server side that I never caught in testing.</p><p>I imagine if this was still running, more bugs would be coming up that would need to be squashed, but I&rsquo;m hoping to replace this now with something a bit more <em>basic</em> on the server-side, leaning a bit more into client-side experiences without the need for server-side validation and user-to-user interaction.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://loparcog.github.io/tags/code/>code</a></li><li><a href=https://loparcog.github.io/tags/webdev/>webdev</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://loparcog.github.io/>Giacomo</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>