<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Pelican" />
    <title>Silly Sound's Sesame</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda" />
    <link rel="stylesheet" type="text/css" href="https://loparcog.github.io/theme/css/main.css" />
    <link rel="stylesheet" href="https://loparcog.github.io/theme/css/stork.css">
    <link rel="stylesheet" media="screen and (prefers-color-scheme: dark)"
        href="https://loparcog.github.io/theme/css/stork-dark.css">
    <link
        href="https://loparcog.github.io/feeds/all.atom.xml"
        type="application/atom+xml" rel="alternate" title="giacomo Atom Feed" />
<meta name="description" content="A virtual eurorack module built in VCV Rack made for clock modulation, specifically a merger of a swing and burst signal modulator." />
    <script>
        if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia(
                '(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark')
        }
    </script>
</head>

<body class="min-h-screen flex flex-col max-w-7xl lg:max-w-none text-zinc-800 bg-neutral-100 
    dark:bg-neutral-900 dark:text-zinc-300 container mx-auto justify-center md:px-3 ">
    <nav class="sm:flex sm:justify-between xl:ml-32 pl-4 items-center">
        <div class="flex pt-4">
            <h1 class="font-semibold text-2xl"><a href="https://loparcog.github.io/">giacomo</a></h1>
            <button id="theme-toggle" type="button"
                class="text-zinc-700 dark:text-zinc-400 rounded-full focus:outline-none text-sm ml-2 p-1">
                <svg id="theme-toggle-dark-icon" class="w-5 h-5 hidden" fill="currentColor" viewBox="0 0 20 20"
                    xmlns="http://www.w3.org/2000/svg">
                    <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
                </svg>
                <svg id="theme-toggle-light-icon" class="w-5 h-5 hidden" fill="currentColor" viewBox="0 0 20 20"
                    xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"
                        fill-rule="evenodd" clip-rule="evenodd"></path>
                </svg>
            </button>
        </div>
        <ul class="flex flex-wrap lg:mr-24 md:pt-0">
            <li class="mr-4 pt-6"><a  href="https://loparcog.github.io/archives.html">Archive</a></li>
            <li class="mr-4 pt-6"><a                     href="https://loparcog.github.io/categories.html">Categories</a></li>
            <li class="mr-4 pt-6"><a  href="https://loparcog.github.io/tags.html">Tags</a></li>
            <li class="mr-4 pt-6"><a  href="https://loparcog.github.io/search.html">Search</a></li>
        </ul>
    </nav>
    <div class="flex-grow md:max-w-screen-md md:mx-auto md:w-3/4 px-4">
        <nav class="text-zinc-800 dark:text-zinc-300 mt-12 pb-2 md:mt-16" aria-label="Breadcrumb">
            <ul class="p-0 inline-flex items-center">
                <li class="flex items-center">
                    <a href="https://loparcog.github.io/" class="text-zinc-800 dark:text-zinc-300 inline-flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z">
                            </path>
                        </svg>
                        Home
                    </a>
                    <svg class="fill-current w-3 h-3 mr-2 ml-1" xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 320 512">
                        <path
                            d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z" />
                    </svg>
                </li>
                <li class="flex items-center">
                    <a href="https://loparcog.github.io/categories.html">Categories</a>
                    <svg class="fill-current w-3 h-3 mr-2 ml-1" xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 320 512">
                        <path
                            d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z" />
                    </svg>
                </li>
                <li class="flex items-center">
                    <a href="https://loparcog.github.io/category/audio-programming.html">Audio Programming</a>
                </li>
                <svg class="fill-current w-3 h-3 mr-2 ml-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">
                    <path
                        d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z" />
                </svg>
            </ul>
        </nav>

<main>
  <header>
    <h1 class="font-semibold text-3xl my-2">Silly Sound's Sesame</h1>
    <footer class="flex text-sm text-zinc-800 dark:text-zinc-400">
      <div class="flex text-xs text-zinc-800 dark:text-zinc-400">
        <time>November 24, 2022</time>
        <div>
          <span>&nbsp;·&nbsp;11 min read</span>
        </div>
        <div>
          <span>&nbsp;·&nbsp;Giacomo Loparco</span>
        </div>
      </div>
    </footer>
  </header>
  <details class="flex flex-col my-6 p-4 bg-zinc-200 dark:bg-zinc-800 rounded-lg">
    <summary class="text-lg font-bold">Table of contents</summary>
    <div class="mx-4 px-4 underline">
      <div id="toc"><ul><li><a class="toc-href" href="#background" title="Background">Background</a></li><li><a class="toc-href" href="#what-is-it" title="What is it">What is it</a></li><li><a class="toc-href" href="#how-each-part-works" title="How each part works">How each part works</a></li><li><a class="toc-href" href="#how-they-work-together" title="How they work together">How they work together</a></li><li><a class="toc-href" href="#conclusion-and-considerations" title="Conclusion and considerations">Conclusion and considerations</a></li></ul></div>
    </div>
  </details>
  <div class="max-w-7xl container mx-auto my-8 text-zinc-800 dark:text-zinc-300  
              prose lg:max-w-none prose-headings:text-zinc-800 prose-headings:dark:text-zinc-300 
              prose-h1:text-3xl lg:prose-h1:text-3xl prose-headings:font-semibold 
              prose-pre:bg-zinc-200 prose-pre:text-zinc-800
              dark:prose-pre:bg-zinc-800 dark:prose-pre:text-zinc-200
              prose-blockquote:text-zinc-800
              dark:prose-blockquote:text-zinc-200
              prose-a:text-gray-500
              dark:prose-a:text-gray-400
              dark:prose-strong:text-zinc-200 
              dark:prose-code:text-zinc-200
              dark:prose-code:bg-zinc-800
              prose-code:bg-zinc-200
              prose-code:font-light
              prose-img:rounded-md
              ">
    <p><em>Feel free to check out this and other Silly Sound modules at <a href="https://github.com/loparcog/SillySounds">the GitHub codebase</a> (they're well commented I swear). All of the code mentioned in this article can be found in <a href="https://github.com/loparcog/SillySounds/blob/master/src/Sesame.cpp">src/Sesame.cpp</a></em></p>
<h2 id="background">Background</h2>
<p>There are multiple this to explain here before going into the actual project, but if you're familiar with VCV Rack you can probably skip ahead. Otherwise, here is a crash course for Eurorack as I understand it. Synthesizers commonly have multiple parts working in unison including something to make sound (commonly waveforms), something to filter that sound to add some <em>depth</em>, something to keep track of time and possibly sequence notes, and many, many more. All of these tools are implicitly part of the synthesizer though, which allow different parameters to be altered but always function and communicate in specific ways. Somewhere in the 50s to 60s someone moved towards making a more "modular" system, something that can have standard voltage inputs and outputs for each part of the synthesizer so you can customize exactly how different components communicate and are controlled. This has spiralled since then, and dawned the birth of Eurorack in the 90s. </p>
<p>Eurorack takes modular synthesizers one step further, and breaks components down into their own panels. Now users can pick and choose which modules they want to use in their setup, and since things are standardized, they can really combine any module from any manufacturer. This birthed a lot of really interesting sounds and equally confusing and expensive setups, which I am both excited and fearful to invest in. Thankfully, there are less costly options to play with modular synthesis, one of those being virtual synthesizers. There are many types of virtual synthesizers, but the one I'm focussing on today is <a href="vcvrack.com/">VCV Rack</a>. This open-source beauty is free to use and also has massive developer support, allowing anyone to create virtual modules and submit them to be on the official module library. I am heavily invested in audio programming right now, and as someone with minimal signal processing experience, I thought this would be a great place to start.</p>
<p><em>Also if you are wondering, Silly Sounds is a mock Eurorack module company that these plugins will be published under. The company has and will never have profits, but is also a fake company, so we are planned to meet our goals year over year.</em></p>
<h2 id="what-is-it">What is it</h2>
<p><strong>Sesame</strong> is a VCV Rack module which takes a standard clock signal as input and modulates it by adding swing and burstfire to the original signal. The swing moves pairs of beats closer together to take away some of the robotic accuracy of the clock and move it towards a <em>jazzier</em> space. The higher the swing, the closer and faster the beats in the pair are, and the farther apart the pairs are from one another. </p>
<p>The repeater, or burstfire, or whatever you would like to call it, essentially divides a single clock high into multiple smaller high signal. The repeater can be actuated on a beat-by-beat basis, and the number of beats the original beat is divided into can be moved from 1 to 8 times (<em>8 is not some technological limit, I just think things get muddy and messy past that and don't see a use case</em>). Both the amount of swing and number of beats the repeater puts out can be modulated automatically with an input signal, allowing these parameters to organically grow and shrink given any range of input. </p>
<p align="center">
<img src="images/sesame.png"/>
<em>Sesame module plugged into a scope, showing clock input on the bottom and modulated output on the top</em>
</p>
<h2 id="how-each-part-works">How each part works</h2>
<p>Sesame is a three-parter in terms of code chunks. The first thing both the swing and repeat portions need is a measure of the current tempo. To do this, I have a timer tracking the time between rises from the clock signal, and I keep the latest gap between signals as the clock period. Every sample period (<em>how often the module process is called, commonly around the 40Hz mark</em>), a <a href="https://en.wikipedia.org/wiki/Schmitt_trigger">Schmitt Trigger</a> processes the current clock input to check for a clock rise. If there is a rise, we record the period and restart the timer. Otherwise, we just continue.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Schmitt trigger initialization</span>
<span class="n">rack</span><span class="o">::</span><span class="n">dsp</span><span class="o">::</span><span class="n">SchmittTrigger</span><span class="w"> </span><span class="n">clockTrigger</span><span class="p">;</span><span class="w"></span>

<span class="p">...</span><span class="w"></span>

<span class="c1">// Get the current time from the timer</span>
<span class="n">currentTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clockTimer</span><span class="p">.</span><span class="n">getTime</span><span class="p">();</span><span class="w"></span>

<span class="c1">// Check if we are on a clock rise (voltage jump from 0 -&gt; 10)</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">clockTrigger</span><span class="p">.</span><span class="n">process</span><span class="p">(</span><span class="n">inputs</span><span class="p">[</span><span class="n">CLOCK_INPUT</span><span class="p">].</span><span class="n">getVoltage</span><span class="p">()))</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Set the current clock period to the current timer time, and reset the timer</span>
<span class="w">    </span><span class="n">originalPeriod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentTime</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">clockTimer</span><span class="p">.</span><span class="n">reset</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Reset the current time</span>
<span class="w">    </span><span class="n">currentTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>The swing and repeater pieces were coded in separate modules before being combined into Sesame. Because of this, and because it's easier to explain and conceptualize, I'll lay them out first independently. The <strong>swing</strong> portion looks at the clock signal as pairs of beats, keeping track of which beat is the first and which one is the second. As swing increases in a range from 0-1, we wait longer for the first beat to play, and we end the second beat sooner. The second beat always starts at the same time as the original clock signal.</p>
<div class="highlight"><pre><span></span><code><span class="n">moddedHigh</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clockHigh</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">swing</span><span class="p">);</span><span class="w"></span>

<span class="c1">// First beat, play when current time is past the adjusted start time</span>
<span class="c1">// and just play for the adjusted clock high time</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">firstBeat</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentTime</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">originalPeriod</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">swing</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>
<span class="w">    </span><span class="n">currentTime</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">(</span><span class="n">originalPeriod</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">swing</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">moddedHigh</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">outValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">else</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">outValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// Second beat, play until current time is more than the adjusted clock high</span>
<span class="k">else</span><span class="w"> </span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentTime</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">moddedHigh</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">outValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">else</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">outValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>The <strong>repeater</strong> portion is a little cleaner, tucked away in a formula applied to the current time and clock period. As seen in the image above, the standard clock signal has a high for exactly the first half of its period, and a low for the second half. Since we're going to be dividing this up into <em>n</em> equal segments, we can just make an equation to take the clock period and <em>n</em> and output the <em>n</em> highs spaced equally across the original period. When <em>n</em> is 1, this would be the exact same as the input signal, but as <em>n</em> rises, the number of clock highs rises proportionately and those clock highs get smaller and smaller, since they still need to fit in the same original period.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Make sure the repeater mod is triggered and we have a valid clock period (&gt;0)</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">modOn</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">clockPeriod</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// This outputs to 10 unless we are in the second half of a clock signal, which will make it output 0</span>
<span class="w">    </span><span class="n">outValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">10</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">((</span><span class="n">currentTime</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">clkPeriod</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Turn off mod if it has passed the initial period, avoid constant repeating when original signal stops</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentTime</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">originalPeriod</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">modOn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="k">else</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Send original signal as the passthrough, avoid needless calculations</span>
<span class="w">    </span><span class="n">outValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">inValue</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h2 id="how-they-work-together">How they work <em>together</em></h2>
<p>So the main part of this project was combining these basic modules under one control scheme. The problem that arises is the swing module is set to output the specific highs and lows of the clock w.r.t the current swing value, whereas the repeater module is set to output all highs and lows in a given period w.r.t the current repeating frequency <em>n</em>. Because of this, we can't just move the equation from the repeater module into the <code>outValue</code> outputs of the swing module and call it a day. What we <em>can</em> do, however, is shift our view of swing from delaying beats and reducing the high and low times to pairs of beats in their own, much faster frequency. Looking at the problem from this angle allows us to easily calculate a new modded period length, which we can then use the repeater function on. All we need to do then is just make sure the first beat waits the appropriate time before playing, and only two beats are played from this new timing.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Calculate the modded period</span>
<span class="n">moddedPeriod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">originalPeriod</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">swing</span><span class="p">);</span><span class="w"></span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">isFirstBeat</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Wait until the current time reaches the start of the modded period time</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">currentTime</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">clockPeriod</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">moddedPeriod</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="cm">/*</span>
<span class="cm">            This output is set to 10 for half of the mod period, and 0 for the second</span>
<span class="cm">            half, as regular clock signals would be. However, this is done through</span>
<span class="cm">            some repeater math as well. Essentially, for n repeats, we are dividing the</span>
<span class="cm">            period into n groups, each group having the first half high (10) and the</span>
<span class="cm">            second half low (0). If there is no repeater trigger, n</span>
<span class="cm">            is set to 1 to mimic just a single beat</span>

<span class="cm">            Also note the time calculation at the start, allowing the equation to mimic</span>
<span class="cm">            starting at t=0, rather than t=(clockPeriod - moddedPeriod)</span>
<span class="cm">        */</span><span class="w"></span>
<span class="w">        </span><span class="n">outValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">10</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">(((</span><span class="n">currentTime</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">clockPeriod</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">moddedPeriod</span><span class="p">))</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">moddedPeriod</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">// If we're on the second beat, we want to play until we reach the end of the modded</span>
<span class="c1">// period time, always starting at the rise of the original second beat</span>
<span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">clkCurrent</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">modPeriod</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Same math, don't need the clock calculation though since we start at the same</span>
<span class="w">    </span><span class="c1">// time as the original second beat, so t=0</span>
<span class="w">    </span><span class="n">outValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">10</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">((</span><span class="n">currentTime</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">moddedPeriod</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h2 id="conclusion-and-considerations">Conclusion and considerations</h2>
<p>This basic clock module was a great dive-in to VCV Rack's development space, and into some signal processing itself. The next step to take ideally would be to start dealing with actual sound waves, which I aim to do through the use of a live feed-through sampler and repeater.</p>
<p>In terms of upgrades, a delay could always be added on to this module as well, and I found in use that a button to flip which beats are viewed as first and second could be helpful in properly synchronizing the swing to your current beat. Since this isn't in VCV Rack currently, it'll still be considered <em>under development</em> and I may add them before submitting, but we'll see. For now, you can always clone the Silly Sounds repo and build the plugin locally to access it on your local VCV Rack setup using <a href="https://vcvrack.com/manual/Building">this handy guide</a>.</p>
    <!-- <div class="aspect-w-16 aspect-h-9 mx-auto"></div> CSS placeholder -->
  </div>
  <footer class="flex flex-col mt-10 ">
    <ul class="flex flex-wrap">
      <a href="https://loparcog.github.io/tag/synth.html">
        <li
          class="bg-zinc-200 hover:bg-zinc-300 dark:hover:bg-zinc-800 dark:bg-zinc-700 text-zinc-500 dark:text-neutral-400 mb-2 mr-2 px-3 py-1.5 rounded-md transition ease-in active:-translate-y-1 active:scale-110 duration-75">
          Synth
        </li>
      </a>
      <a href="https://loparcog.github.io/tag/vcv-rack.html">
        <li
          class="bg-zinc-200 hover:bg-zinc-300 dark:hover:bg-zinc-800 dark:bg-zinc-700 text-zinc-500 dark:text-neutral-400 mb-2 mr-2 px-3 py-1.5 rounded-md transition ease-in active:-translate-y-1 active:scale-110 duration-75">
          VCV Rack
        </li>
      </a>
    </ul>
    <div class="flex w-full my-2 bg-zinc-200 dark:bg-zinc-700 rounded-lg">
      <div class="w-1/2 rounded-l-lg"></div>
      <div class="w-1/2 hover:bg-zinc-300 dark:hover:bg-zinc-800 rounded-r-lg ">
        <a class="flex flex-col" href="https://loparcog.github.io/conways-game-of-synth.html">
          <div class="text-right mx-4 py-2">
            <p class="text-zinc-500 dark:text-neutral-400 text-sm">NEXT PAGE »</p>
            <p class="text-right py-1 hover:underline">Conway's Game of Synth</p>
          </div>
        </a>
      </div>
    </div>
    <div class="flex bg-zinc-200 dark:bg-zinc-700 py-2 rounded-lg justify-center space-x-2 text-xs">
      <ul>
        <a target="_blank" rel="noopener noreferrer" title="twitter" aria-label="share Features on twitter"
          href="https://twitter.com/intent/tweet/?text=Features&amp;url=https://loparcog.github.io/silly-sounds-sesame.html">
          <li class="bg-gray-900 p-1 text-white rounded-md">
            <i class="fab fa-twitter fa-2x" aria-hidden="true"></i>
          </li>
        </a>
      </ul>
      <ul>
        <a target="_blank" rel="noopener noreferrer" title="linkedin" aria-label="share Features on linkedin"
          href="https://www.linkedin.com/sharing/share-offsite/?url=https://loparcog.github.io/silly-sounds-sesame.html">
          <li class="bg-gray-900 p-1 text-white rounded-md">
            <i class="fab fa-linkedin fa-2x" aria-hidden="true"></i>
          </li>
        </a>
      </ul>
      <ul>
        <a target="_blank" rel="noopener noreferrer" title="reddit" aria-label="share Features on reddit"
          href="https://reddit.com/submit?url=https://loparcog.github.io/silly-sounds-sesame.html">
          <li class="bg-gray-900 p-1 text-white rounded-md">
            <i class="fab fa-reddit fa-2x" aria-hidden="true"></i>
          </li>
        </a>
      </ul>
      <ul>
        <a target="_blank" rel="noopener noreferrer" title="telegram" aria-label="share Features on telegram"
          href="https://telegram.me/share/url?text=Features&amp;url=https://loparcog.github.io/silly-sounds-sesame.html">
          <li class="bg-gray-900 p-1 text-white rounded-md">
            <i class="fab fa-telegram fa-2x" aria-hidden="true"></i>
          </li>
        </a>
      </ul>
    </div>
  </footer>
  <div>
  </div>
</main>

    </div>
    <footer class="flex w-full text-xs justify-center mt-10 mb-6 text-zinc-500 dark:text-zinc-400">
        <div class="px-4">
            <span>©2022&nbsp;&#8226;&nbsp;</span>Powered by
            <a class="underline" href="https://getpelican.com/">Pelican</a>&nbsp;&
            <a class="underline" href="https://github.com/aleylara/Papyrus">&nbsp;Papyrus</a>
        </div>
    </footer>


    <script>
        let themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
        let themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');
        if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia(
                '(prefers-color-scheme: dark)').matches)) {
            themeToggleLightIcon.classList.remove('hidden');
        } else {
            themeToggleDarkIcon.classList.remove('hidden');
        }
        let themeToggleBtn = document.getElementById('theme-toggle');
        themeToggleBtn.addEventListener('click', function () {
            themeToggleDarkIcon.classList.toggle('hidden');
            themeToggleLightIcon.classList.toggle('hidden');
            if (localStorage.getItem('color-theme')) {
                if (localStorage.getItem('color-theme') === 'light') {
                    document.documentElement.classList.add('dark');
                    localStorage.setItem('color-theme', 'dark');
                } else {
                    document.documentElement.classList.remove('dark');
                    localStorage.setItem('color-theme', 'light');
                }
            } else {
                if (document.documentElement.classList.contains('dark')) {
                    document.documentElement.classList.remove('dark');
                    localStorage.setItem('color-theme', 'light');
                } else {
                    document.documentElement.classList.add('dark');
                    localStorage.setItem('color-theme', 'dark');
                }
            }
        });
    </script>
    <script src="https://files.stork-search.net/releases/v1.4.0/stork.js"></script>
    <script>
        stork.register("sitesearch", "https://loparcog.github.io/search-index.st")
    </script>
</body>

</html>